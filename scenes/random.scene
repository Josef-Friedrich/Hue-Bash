#! /bin/bash

source /usr/local/bin/hue

function random_light {
  LAMP=$1
  COLOR=$2

  # Color.
  SPREAD=2000
  START=$((COLOR - SPREAD))
  END=$((COLOR + SPREAD))

  COLOR=$(hue_range $START $END)

  # Brightness
  BRIGHTNESS=$(hue_range 50 150)

  hue_set $LAMP hue $COLOR bri 255 sat 255 transitiontime 20
  sleep 2
  hue_set $LAMP bri $BRIGHTNESS transitiontime 20
  sleep 2
}

for LAMP in 7 8 9 1 2 3 ; do
  hue_loop random_light $LAMP 46920
done
